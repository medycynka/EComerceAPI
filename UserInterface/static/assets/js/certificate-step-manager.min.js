const loader=$("#global-loader");let saleItemsTable=null,saleItemsSummaryPrice=null,saleSaleDate=null,saleIssueDate=null;const quantityTypeMultiplier={21:1,22:10,23:100,24:1e3,25:1},calendarConfig={display:{components:{clock:!0,hours:!1,minutes:!1,seconds:!1,useTwentyfourHour:!1},buttons:{today:!0,close:!0,clear:!0},icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down",next:"fa fa-chevron-right",previous:"fa fa-chevron-left",today:"fa fa-calendar-check-o",clear:"fa fa-trash",close:"fa fa-times"},viewMode:"calendar"}};let saleCreationTemplate;function initNewSaleTemplate(e,a){saleCreationTemplate=`
        <div class="form-row">
            <div class="form-group col-md-12 mb-0">
                <label class="form-label" id="newSaleCompanyLabel"><b>Firma</b></label>
                <div class="form-control fake-disabled-input-text" id="newSaleCompanySelect" data-requester-id="${a}">${e}</div>
            </div>
        </div>
        <div class="form-row" style="margin-top: 1rem;">
            <div class="col-3">
                <label class="form-label" id="newSaleSaleDate"><b>Data sprzedaży</b><span class="asteriskField">*</span></label>
                <div class="input-group" id="datetimepicker1" data-td-target-input="nearest" data-td-target-toggle="nearest">
                    <input type="text" class="form-control" name="sale_date" id="id_sale_date" data-td-target="#datetimepicker1" style="border-right: none;"/>
                    <div class="input-group-append date-select-btn" data-td-target="#datetimepicker1" data-td-toggle="datetimepicker">
                        <div class="input-group-text" style="height: 100%"><i class="fa fa-calendar"></i></div>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <label class="form-label" id="newSaleIssueDate"><b>Data wystawienia</b><span class="asteriskField">*</span></label>
                <div class="input-group" id="datetimepicker2" data-td-target-input="nearest" data-td-target-toggle="nearest">
                    <input type="text" class="form-control" name="issue_date" id="id_issue_date" data-td-target="#datetimepicker2" style="border-right: none;"/>
                    <div class="input-group-append date-select-btn" data-td-target="#datetimepicker2" data-td-toggle="datetimepicker">
                        <div class="input-group-text" style="height: 100%"><i class="fa fa-calendar"></i></div>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="form-group col-md-12 mb-0">
                    <label class="form-label" id="newSalePaymentTimeLabel"><b>Termin płatności</b><span class="asteriskField">*</span></label>
                    ${paymentTimeSelectTemplate}
                </div>
            </div>
        </div>
        <div class="form-row" style="margin-top: 1rem;">
            <div class="col-3">
                <div class="form-group col-md-12 mb-0">
                    <label class="form-label" id="newSaleInvoiceSeriesSelectLabel"><b>Szablon numeracji</b><span class="asteriskField">*</span></label>
                    ${invoiceSeriesSelectTemplate}
                </div>
            </div>
            <div class="col-3">
                <div class="form-group col-md-12 mb-0">
                    <label class="form-label" id="newSaleStatusLabel"><b>Status</b><span class="asteriskField">*</span></label>
                    <select name="newSaleStatus" class="form-control form-select" id="newSaleStatus" tabindex="-1" aria-hidden="true">
                        <option value="0" selected="">Do zapłacenia</option>
                        <option value="1">Zapłacone</option>
                    </select>
                </div>
            </div>
            <div class="col-3">
                <div class="form-group col-md-12 mb-0">
                    <label class="form-label" id="newSaleActionLabel"><b>Wystaw natychmiast</b><span class="asteriskField">*</span></label>
                    <select name="newSaleAction" class="form-control form-select" id="newSaleAction" tabindex="-1" aria-hidden="true">
                        <option value="0" selected="">Nie</option>
                        <option value="1">Tak</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="form-row" style="margin-top: 1rem;">
            <div class="form-group col-md-12 mb-0">
                <table class="table border mg-b-0">
                    <thead>
                        <tr>
                            <th style="width: 5%; text-align: center; vertical-align: middle;">Lp.</th>
                            <th style="width: 30%; text-align: left; vertical-align: middle;"">Produkt</th>
                            <th style="width: 12.5%; text-align: left; vertical-align: middle;"">Jednostka</th>
                            <th style="width: 7.5%; text-align: left; vertical-align: middle;"">Ilość</th>
                            <th style="width: 15%; text-align: left; vertical-align: middle;"">Cena netto</th>
                            <th style="width: 10%; text-align: left; vertical-align: middle;"">Stawka</th>
                            <th style="width: 15%; text-align: left; vertical-align: middle;"">Wart. brutto &asymp;</th>
                            <th style="width: 5%; text-align: center; vertical-align: middle;""><i class="fe fe-x" style="font-size: 1.25rem; cursor: pointer;" onclick="removeAllSaleItems()"></i></th>
                        </tr>
                    </thead>
                    <tbody id="newSaleNewSaleItem"></tbody>
                </table>
            </div>
        </div>
        <div class="form-row">
            <div class="col-2">
                <button type="button" class="add-sale-item-btn" onclick="addNewSaleItem()">DODAJ POZYCJĘ <i class="fe fe-plus" style="color: var(--primary-bg-color);"></i></button>
            </div>
            <div class="col-4"></div>
            <div class="col-4" style="padding-left: 4.5rem;"><b>Razem (PLN)</b></div>
            <div class="col-1" style="margin-left: 1rem;"><b id="newSaleSummaryPrice" style="float: right;">0.00</b></div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-12 mb-0">
                <label class="form-label"><b>Opis</b></label>
                <textarea id="newSaleDescription" class="bootbox-input bootbox-input-textarea form-control" placeholder="Opis" rows="10" maxlength="2000"></textarea>
            </div>
        </div>
    `}function nettoToBrutto(e,a){return a<100?((100+a)/100*e).toFixed(2):e}function addSale(e){let a=bootbox.dialog({title:e,message:saleCreationTemplate,onEscape:!0,backdrop:!1,centerVertical:!0,locale:"pl",size:"xl",scrollable:!0,buttons:{cancel:{label:'<i class="fa fa-times"></i> Anuluj',className:"btn-danger",callback:function(){}},ok:{label:'<i class="fa fa-check"></i> Zatwierdź',className:"btn-primary",callback:function(){let e=serializeSaleData();console.log(e);let a=saleItemsTable.getElementsByTagName("tr"),t=!0;for(let l=0;l<e.sale_items.length;l++){let i=a[l].getElementsByTagName("td");""===e.sale_items[l].name&&(t=!1,addInvalidItemCss(i[1].childNodes[0],"Nazwa produktu nie może być pusta!","Nazwa produktu")),(""===e.sale_items[l].quantity||Number(e.sale_items[l].quantity<1))&&(t=!1,addInvalidItemCss(i[3].childNodes[0],"1","1")),(""===e.sale_items[l].netto||Number(e.sale_items[l].netto<0))&&(t=!1,addInvalidItemCss(i[4].childNodes[0],"0.00","0.00"))}if(""===e.sell_date||""===e.issue_date||""===e.invoice_series||""===e.payment_time||e.sale_items.length<1||!1===t)return""===e.sell_date&&addInvalidCss("input#id_sale_date","label#newSaleSaleDate"),""===e.issue_date&&addInvalidCss("input#id_issue_date","label#newSaleIssueDate"),""===e.payment_time&&addInvalidCss("select#newSalePaymentTime","label#newSalePaymentTimeLabel"),""===e.invoice_series&&addInvalidCss("select#newSaleInvoiceSeriesSelect","label#newSaleInvoiceSeriesSelectLabel"),0===e.sale_items.length&&$(saleItemsTable).parent().children("thead").children("tr").children().addClass("invalid-sale-items-table"),!1;loader.show(),$.ajax({url:window.location.pathname,data:JSON.stringify(e),type:"POST",headers:{"X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]").value},contentType:"application/json",success(e,a,t){console.log(a,e),"error"!==e.status?window.location.reload():(loader.hide(),bootbox.alert({title:`<span style="font-family: Roboto, sans-serif !important;"><i class="fa fa-exclamation"></i>&emsp;Błąd podczas wystawiania faktury!</span>`,message:`Error: ${e.msg}
Status: ${e.status}`,onEscape:!0,backdrop:!0,centerVertical:!0,size:"large"}))},error(e,a,t){console.log(a,t),loader.hide(),bootbox.alert({title:`<span style="font-family: Roboto, sans-serif !important;"><i class="fa fa-exclamation"></i>&emsp;Błąd podczas wystawiania faktury!</span>`,message:`Error: ${t}
Status: ${a}`,onEscape:!0,backdrop:!0,centerVertical:!0,size:"large"})}})}}}});return a.init(function(){saleItemsTable=$("tbody#newSaleNewSaleItem")[0],saleItemsSummaryPrice=$("b#newSaleSummaryPrice");let e=$("div.bootbox-body");$("#newSalePaymentTime").select2({minimumResultsForSearch:1/0,dropdownParent:e}),$("#newSaleInvoiceSeriesSelect").select2({minimumResultsForSearch:1/0,dropdownParent:e}),$("#newSaleStatus").select2({minimumResultsForSearch:1/0,dropdownParent:e}),$("#newSaleAction").select2({minimumResultsForSearch:1/0,dropdownParent:e});let a=document.getElementById("datetimepicker1");saleSaleDate=new tempusDominus.TempusDominus(a,calendarConfig);let t=document.getElementById("datetimepicker2");saleIssueDate=new tempusDominus.TempusDominus(t,calendarConfig)}),!1}function addInvalidCss(e,a){let t=$(e),l=$(a),i=t.parent().find("div.input-group-text"),s=void 0!==i[0]&&null!==i[1];t.addClass("is-invalid"),l.addClass("invalid-form-label-asterix"),!0===s&&i.addClass("invalid-input-group-text"),t.is("select")?(t.parent().find(".select2-selection").attr("style","border-color: #f82649 !important;"),t.one("change",function(){t.removeClass("is-invalid"),l.removeClass("invalid-form-label-asterix"),t.parent().find(".select2-selection").attr("style","")})):!0===s?t.one("change",function(){t.removeClass("is-invalid"),l.removeClass("invalid-form-label-asterix"),i.removeClass("invalid-input-group-text")}):t.one("input",function(){t.removeClass("is-invalid"),l.removeClass("invalid-form-label-asterix")})}function addInvalidItemCss(e,a,t){let l=$(e);l.addClass("is-invalid"),l.attr("placeholder",a),l.one("input",function(){$(this).removeClass("is-invalid"),$(this).attr("placeholder",t)})}function addNewSaleItem(){let e=`<tr>
            <td style="text-align: center; vertical-align: middle;">${saleItemsTable.childNodes.length+1}</td>
            <td id="saleItemName"><input type="text" name="saleItemName" maxlength="255" class="textInput form-control" id="id_sale_item_name" placeholder="Nazwa produktu"></td>
            <td id="saleItemQuantityType">${saleItemQuantityTypeSelectTemplate}</td>
            <td id="saleItemQuantity"><input type="number" name="saleItemQuantity" min="1" class="form-control" id="id_sale_item_quantity" value="1"></td>
            <td id="saleItemNettoPrice"><input type="number" name="saleItemNetto" min="0" class="form-control" id="id_sale_item_netto" placeholder="0.00"></td>
            <td id="saleItemVat">${paymentVatSelectTemplate}</td>
            <td id="saleItemBruttoPrice"><input type="number" name="saleItemNetto" min="0" class="form-control" id="id_sale_item_brutto" disabled placeholder="0.00"></td>
            <td style="text-align: center; vertical-align: middle;"><i class="fe fe-x" style="font-size: 1.25rem; cursor: pointer;" onclick="removeSaleItem(this)"></i></td>
        </tr>`;$(saleItemsTable).append($(e)),$(saleItemsTable).parent().children("thead").children("tr").children().removeClass("invalid-sale-items-table");let a=$("div.bootbox-body"),t=$(saleItemsTable.lastElementChild).find("select#newSaleItemQuantityType");t.select2({minimumResultsForSearch:1/0,dropdownParent:a}),t.on("change",function(){fixSaleItemsTable(!1)});let l=$(saleItemsTable.lastElementChild).find("select#newSaleItemVat"),i=$(saleItemsTable.lastElementChild).find("input#id_sale_item_netto"),s=$(saleItemsTable.lastElementChild).find("input#id_sale_item_brutto"),n=$(saleItemsTable.lastElementChild).find("input#id_sale_item_quantity");return l.select2({minimumResultsForSearch:1/0,dropdownParent:a}),l.change(function(){s.val(nettoToBrutto(Number(i.val()),Number(this.value))),fixSaleItemsTable(!1)}),i.on("input",function(){let e=$(this).val().split("."),a=Number($(this).val());a>=0?(e.length>1&&e[1].length>2&&($(this).val(Number($(this).val()).toFixed(2)),a=Number(Number($(this).val()).toFixed(2))),s.val(nettoToBrutto(a,Number($(saleItemsTable.lastElementChild).find("select#newSaleItemVat")[0].value)))):($(this).val("0.00"),s.val("0.00")),fixSaleItemsTable(!1)}),n.on("input",function(){let e=$(this).val().split("."),a=Number(e[0]);if(a>=0){if(e.length>1&&e[1].length>2){$(this).val(Number($(this).val()).toFixed(2));return}}else $(this).val("1.00");fixSaleItemsTable(!1)}),!1}function removeSaleItem(e){return $(e).closest("tr").remove(),fixSaleItemsTable(),!1}function removeAllSaleItems(){return $(saleItemsTable).empty(),!1}function fixSaleItemsTable(e=!0){let a=0;for(let t=0;t<saleItemsTable.childNodes.length;t++){if(!0===e){for(let l=0;l<saleItemsTable.childNodes[t].childNodes.length;l++)if("TD"===saleItemsTable.childNodes[t].childNodes[l].nodeName){$(saleItemsTable.childNodes[t].childNodes[l]).text(t+1);break}}a+=Number($(saleItemsTable.childNodes[t]).children("td#saleItemBruttoPrice").children("input").val())*Number($(saleItemsTable.childNodes[t]).children("td#saleItemQuantity").children("input").val())*quantityTypeMultiplier[$(saleItemsTable.childNodes[t]).children("td#saleItemQuantityType").children("select")[0].value]}saleItemsSummaryPrice.text(a.toFixed(2))}function serializeSaleData(){let e={company:$("div#newSaleCompanySelect").data("requester-id"),sell_date:$("input#id_sale_date").val(),issue_date:$("input#id_issue_date").val(),payment_time:$("select#newSalePaymentTime")[0].value,invoice_series:$("select#newSaleInvoiceSeriesSelect")[0].value,paid:"1"===$("select#newSaleStatus")[0].value,issue_now:"1"===$("select#newSaleAction")[0].value,sale_items:[],note:$("textarea#newSaleDescription").val()};for(let a=0;a<saleItemsTable.childNodes.length;a++){let t=$(saleItemsTable.childNodes[a]).children("td#saleItemQuantityType").children("select")[0].value;e.sale_items.push({name:$(saleItemsTable.childNodes[a]).children("td#saleItemName").children("input").val(),quantity_type:t,quantity:quantityTypeMultiplier[t]*Number($(saleItemsTable.childNodes[a]).children("td#saleItemQuantity").children("input").val()),netto:$(saleItemsTable.childNodes[a]).children("td#saleItemNettoPrice").children("input").val(),brutto:$(saleItemsTable.childNodes[a]).children("td#saleItemBruttoPrice").children("input").val(),vat:$(saleItemsTable.childNodes[a]).children("td#saleItemVat").children("select")[0].value})}return e}function FakeDataTransfer(e){this.dropEffect="all",this.effectAllowed="all",this.items=[],this.types=["Files"],this.getData=function(){return this.dt},this.dt=new DataTransfer;for(let a=0;a<e.length;a++)this.dt.items.add(e[a])}const certificateStepManager={1:function(e,a){bootbox.dialog({title:e,message:a,onEscape:!0,backdrop:!1,centerVertical:!0,locale:"pl",size:"large",buttons:{cancel:{label:'<i class="fa fa-times"></i> Anuluj',className:"btn-danger",callback:function(){}},ok:{label:'<i class="fa fa-check"></i> Potwierdź',className:"btn-primary",callback:function(){loader.show();let e=new FormData;$.ajax({url:window.location.pathname,data:e,type:"POST",headers:{"X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]").value},contentType:!1,processData:!1,success(e,a,t){console.log(a,e),window.location.reload()},error(e,a,t){console.log(a,t),loader.hide()}})}}}})},2:function(e){addSale(e)},3:function(e){let a=bootbox.dialog({title:e,message:`
                <div class="form-row">
                    <div class="col-6">
                        <label class="form-label" id="auditStartDateLabel"><b>Data startu audytu</b><span class="asteriskField">*</span></label>
                        <div class="input-group" id="datetimepicker1" data-td-target-input="nearest" data-td-target-toggle="nearest">
                            <input type="text" class="form-control" name="audit_start_date" id="id_audit_start_date" data-td-target="#datetimepicker1" style="border-right: none;"/>
                            <div class="input-group-append date-select-btn" data-td-target="#datetimepicker1" data-td-toggle="datetimepicker">
                                <div class="input-group-text" style="height: 100%"><i class="fa fa-calendar"></i></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <label class="form-label" id="auditEndDateLabel"><b>Data końca audytu</b><span class="asteriskField">*</span></label>
                        <div class="input-group" id="datetimepicker2" data-td-target-input="nearest" data-td-target-toggle="nearest">
                            <input type="text" class="form-control" name="audit_end_date" id="id_audit_end_date" data-td-target="#datetimepicker2" style="border-right: none;"/>
                            <div class="input-group-append date-select-btn" data-td-target="#datetimepicker2" data-td-toggle="datetimepicker">
                                <div class="input-group-text" style="height: 100%"><i class="fa fa-calendar"></i></div>
                            </div>
                        </div>
                    </div>
                </div>
            `,onEscape:!0,backdrop:!1,centerVertical:!0,locale:"pl",size:"large",buttons:{cancel:{label:'<i class="fa fa-times"></i> Anuluj',className:"btn-danger",callback:function(){}},ok:{label:'<i class="fa fa-check"></i> Potwierdź',className:"btn-primary",callback:function(){let e=$("input#id_audit_start_date").val(),a=$("input#id_audit_end_date").val();if(""===e||""===a)return""===e&&addInvalidCss("input#id_audit_start_date","label#auditStartDateLabel"),""===a&&addInvalidCss("input#id_audit_end_date","label#auditEndDateLabel"),!1;loader.show();let t=new FormData;t.append("audit_start_date",e),t.append("audit_end_date",a),$.ajax({url:window.location.pathname,data:t,type:"POST",headers:{"X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]").value},contentType:!1,processData:!1,success(e,a,t){console.log(a,e),window.location.reload()},error(e,a,t){console.log(a,t),loader.hide()}})}}}});a.init(function(){let e=document.getElementById("datetimepicker1");new tempusDominus.TempusDominus(e,calendarConfig);let a=document.getElementById("datetimepicker2");new tempusDominus.TempusDominus(a,calendarConfig)})},4:function(e){bootbox.dialog({title:e,message:`
                <div class="form-row">
                    <div class="form-group col-md-12 mb-0">
                        <div id="div_id_audit_results" class="mb-3">
                            <label for="id_audit_results" class="form-label">Dodaj wynik audytu</label>
                            <input type="file" name="audit_results" class="form-control" accept="application/pdf" id="id_audit_results" multiple>
                        </div>
                    </div>
                </div>
            `,onEscape:!0,backdrop:!1,centerVertical:!0,locale:"pl",size:"large",buttons:{cancel:{label:'<i class="fa fa-times"></i> Anuluj',className:"btn-danger",callback:function(){}},ok:{label:'<i class="fa fa-check"></i> Potwierdź',className:"btn-primary",callback:function(){let e=document.getElementById("id_audit_results");if(0===e.files.length)return!1;loader.show();let a=new FormData;for(let t=0;t<e.files.length;t++)a.append(`audit_result_${t}`,e.files[t]);$.ajax({url:window.location.pathname,data:a,type:"POST",headers:{"X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]").value},contentType:!1,processData:!1,success(e,a,t){console.log(a,e),window.location.reload()},error(e,a,t){console.log(a,t),loader.hide()}})}}},onShow:function(e){let a=$("#id_audit_results"),t={};function l(){let e=new DragEvent("drop");Object.defineProperty(e,"dataTransfer",{value:new FakeDataTransfer(Object.values(t))}),a[0].dispatchEvent(e)}a.FancyFileUpload({accept:["*"],edit:!1,allowUpload:!1,originalInputId:"#id_files",added:function(e,a){this.find(".ff_fileupload_actions button.ff_fileupload_start_upload").hide();for(let i=0;i<a.files.length;i++)t[a.files[i].name]=a.files[i];l()},fileRemoveOption:function(e){void 0!==t[e]&&(delete t[e],l())},langmap:{"Starting upload...":"Rozpoczynanie przesyłania...","Cancel upload and remove from list":"Anuluj przesłanie i usuń z listy",Preview:"Podgląd","No preview available":"Podgląd jest niedostępny","Invalid file extension.":"Blędne rozszerzenie pliku. ","Accepted extensions: ":"Dopuszczalne rozszerzenia: ","File is too large.  Maximum file size is {0}.":"Plik jest zbyt duży. Maksymalny rozmiar pliku to {0}","Start uploading":"Rozpocznij przesyłanie","Remove from list":"Usuń plik z listy","{0} of {1} | {2}%":"{0} z {1} | {2}%","{0} | Network error, retrying in a moment...":"{0} | Bląd połączenia, za chwilę rozpocznie się ponowna pr\xf3ba...","The upload was cancelled":"Przesyłanie zostało anulowane","The upload failed.  {0} ({1})":"Błąd przesyłania.  {0} ({1})","The upload failed.":"Błąd przesyłania.","Upload completed":"Zakończono przesyłanie","Browse, drag-and-drop, or paste files to upload":"Przeglądaj, upuść, lub wklej pliki, kt\xf3re chcesz przesłać"}}),a.on("drop",function(e){e.originalEvent.dataTransfer&&"function"==typeof e.originalEvent.dataTransfer.getData&&(a[0].files=e.originalEvent.dataTransfer.getData().files)})}})},5:function(e){bootbox.dialog({title:e,message:`
                <div class="form-row">
                    <div class="form-group col-md-12 mb-0">
                        <div id="div_id_documentation" class="mb-3">
                            <label for="id_documentation" class="form-label">Dodaj wynik audytu</label>
                            <input type="file" name="documentation" class="form-control" accept="application/pdf" id="id_documentation" multiple>
                        </div>
                    </div>
                </div>
            `,onEscape:!0,backdrop:!1,centerVertical:!0,locale:"pl",size:"large",buttons:{cancel:{label:'<i class="fa fa-times"></i> Anuluj',className:"btn-danger",callback:function(){}},ok:{label:'<i class="fa fa-check"></i> Potwierdź',className:"btn-primary",callback:function(){let e=document.getElementById("id_documentation");if(0===e.files.length)return!1;loader.show();let a=new FormData;for(let t=0;t<e.files.length;t++)a.append(`documentation_${t}`,e.files[t]);$.ajax({url:window.location.pathname,data:a,type:"POST",headers:{"X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]").value},contentType:!1,processData:!1,success(e,a,t){console.log(a,e),window.location.reload()},error(e,a,t){console.log(a,t),loader.hide()}})}}},onShow:function(e){let a=$("#id_documentation"),t={};function l(){let e=new DragEvent("drop");Object.defineProperty(e,"dataTransfer",{value:new FakeDataTransfer(Object.values(t))}),a[0].dispatchEvent(e)}a.FancyFileUpload({accept:["*"],edit:!1,allowUpload:!1,originalInputId:"#id_files",added:function(e,a){this.find(".ff_fileupload_actions button.ff_fileupload_start_upload").hide();for(let i=0;i<a.files.length;i++)t[a.files[i].name]=a.files[i];l()},fileRemoveOption:function(e){void 0!==t[e]&&(delete t[e],l())},langmap:{"Starting upload...":"Rozpoczynanie przesyłania...","Cancel upload and remove from list":"Anuluj przesłanie i usuń z listy",Preview:"Podgląd","No preview available":"Podgląd jest niedostępny","Invalid file extension.":"Blędne rozszerzenie pliku. ","Accepted extensions: ":"Dopuszczalne rozszerzenia: ","File is too large.  Maximum file size is {0}.":"Plik jest zbyt duży. Maksymalny rozmiar pliku to {0}","Start uploading":"Rozpocznij przesyłanie","Remove from list":"Usuń plik z listy","{0} of {1} | {2}%":"{0} z {1} | {2}%","{0} | Network error, retrying in a moment...":"{0} | Bląd połączenia, za chwilę rozpocznie się ponowna pr\xf3ba...","The upload was cancelled":"Przesyłanie zostało anulowane","The upload failed.  {0} ({1})":"Błąd przesyłania.  {0} ({1})","The upload failed.":"Błąd przesyłania.","Upload completed":"Zakończono przesyłanie","Browse, drag-and-drop, or paste files to upload":"Przeglądaj, upuść, lub wklej pliki, kt\xf3re chcesz przesłać"}}),a.on("drop",function(e){e.originalEvent.dataTransfer&&"function"==typeof e.originalEvent.dataTransfer.getData&&(a[0].files=e.originalEvent.dataTransfer.getData().files)})}})},6:function(e,a){bootbox.dialog({title:e,message:a,onEscape:!0,backdrop:!1,centerVertical:!0,locale:"pl",size:"large",buttons:{cancel:{label:'<i class="fa fa-times"></i> Anuluj',className:"btn-danger",callback:function(){}},ok:{label:'<i class="fa fa-check"></i> Potwierdź',className:"btn-primary",callback:function(){loader.show();let e=new FormData;$.ajax({url:window.location.pathname,data:e,type:"POST",headers:{"X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]").value},contentType:!1,processData:!1,success(e,a,t){console.log(a,e),window.location.reload()},error(e,a,t){console.log(a,t),loader.hide()}})}}}})},7:function(e){addSale(e)},8:function(e,a){bootbox.dialog({title:e,message:a,onEscape:!0,backdrop:!1,centerVertical:!0,locale:"pl",size:"large",buttons:{cancel:{label:'<i class="fa fa-times"></i> Anuluj',className:"btn-danger",callback:function(){}},ok:{label:'<i class="fa fa-check"></i> Potwierdź',className:"btn-primary",callback:function(){loader.show();let e=new FormData;$.ajax({url:window.location.pathname,data:e,type:"POST",headers:{"X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]").value},contentType:!1,processData:!1,success(e,a,t){console.log(a,e),window.location.reload()},error(e,a,t){console.log(a,t),loader.hide()}})}}}})}};Object.seal(certificateStepManager),Object.freeze(certificateStepManager),Object.preventExtensions(certificateStepManager);