!function($,e,f,b){"use strict";var d="treeview",c={};c.settings={injectStyle:!0,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked",color:b,backColor:b,borderColor:b,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:b,enableLinks:!1,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,onNodeChecked:b,onNodeCollapsed:b,onNodeDisabled:b,onNodeEnabled:b,onNodeExpanded:b,onNodeSelected:b,onNodeUnchecked:b,onNodeUnselected:b,onSearchComplete:b,onSearchCleared:b,currentSelected:b},c.options={silent:!1,ignoreChildren:!1},c.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0};var a=function(a,b){return this.$element=$(a),this.elementId=a.id,this.styleId=this.elementId+"-style",this.init(b),{options:this.options,init:$.proxy(this.init,this),remove:$.proxy(this.remove,this),getNode:$.proxy(this.getNode,this),getParent:$.proxy(this.getParent,this),getSiblings:$.proxy(this.getSiblings,this),getSelected:$.proxy(this.getSelected,this),getUnselected:$.proxy(this.getUnselected,this),getExpanded:$.proxy(this.getExpanded,this),getCollapsed:$.proxy(this.getCollapsed,this),getChecked:$.proxy(this.getChecked,this),getUnchecked:$.proxy(this.getUnchecked,this),getDisabled:$.proxy(this.getDisabled,this),getEnabled:$.proxy(this.getEnabled,this),selectNode:$.proxy(this.selectNode,this),unselectNode:$.proxy(this.unselectNode,this),toggleNodeSelected:$.proxy(this.toggleNodeSelected,this),collapseAll:$.proxy(this.collapseAll,this),collapseNode:$.proxy(this.collapseNode,this),expandAll:$.proxy(this.expandAll,this),expandNode:$.proxy(this.expandNode,this),toggleNodeExpanded:$.proxy(this.toggleNodeExpanded,this),revealNode:$.proxy(this.revealNode,this),checkAll:$.proxy(this.checkAll,this),checkNode:$.proxy(this.checkNode,this),uncheckAll:$.proxy(this.uncheckAll,this),uncheckNode:$.proxy(this.uncheckNode,this),toggleNodeChecked:$.proxy(this.toggleNodeChecked,this),disableAll:$.proxy(this.disableAll,this),disableNode:$.proxy(this.disableNode,this),enableAll:$.proxy(this.enableAll,this),enableNode:$.proxy(this.enableNode,this),toggleNodeDisabled:$.proxy(this.toggleNodeDisabled,this),search:$.proxy(this.search,this),clearSearch:$.proxy(this.clearSearch,this),hasSelectedNodes:$.proxy(this.hasSelectedNodes,this)}};a.prototype.init=function(a){this.tree=[],this.nodes=[],a.data&&("string"==typeof a.data&&(a.data=$.parseJSON(a.data)),this.tree=$.extend(!0,[],a.data),delete a.data),this.options=$.extend({},c.settings,a),this.destroy(),this.subscribeEvents(),this.setInitialStates({nodes:this.tree},0),this.render()},a.prototype.remove=function(){this.destroy(),$.removeData(this,d),$("#"+this.styleId).remove()},a.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)},a.prototype.unsubscribeEvents=function(){this.$element.off("click"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},a.prototype.subscribeEvents=function(){this.unsubscribeEvents(),this.$element.on("click",$.proxy(this.clickHandler,this)),"function"==typeof this.options.onNodeChecked&&this.$element.on("nodeChecked",this.options.onNodeChecked),"function"==typeof this.options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this.options.onNodeCollapsed),"function"==typeof this.options.onNodeDisabled&&this.$element.on("nodeDisabled",this.options.onNodeDisabled),"function"==typeof this.options.onNodeEnabled&&this.$element.on("nodeEnabled",this.options.onNodeEnabled),"function"==typeof this.options.onNodeExpanded&&this.$element.on("nodeExpanded",this.options.onNodeExpanded),"function"==typeof this.options.onNodeSelected&&this.$element.on("nodeSelected",this.options.onNodeSelected),"function"==typeof this.options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this.options.onNodeUnchecked),"function"==typeof this.options.onNodeUnselected&&this.$element.on("nodeUnselected",this.options.onNodeUnselected),"function"==typeof this.options.onSearchComplete&&this.$element.on("searchComplete",this.options.onSearchComplete),"function"==typeof this.options.onSearchCleared&&this.$element.on("searchCleared",this.options.onSearchCleared)},a.prototype.setInitialStates=function(a,b){if(a.nodes){b+=1;var c=a,d=this;$.each(a.nodes,function(e,a){a.nodeId=d.nodes.length,a.parentId=c.nodeId,a.hasOwnProperty("selectable")||(a.selectable=!0),a.state=a.state||{},a.state.hasOwnProperty("checked")||(a.state.checked=!1),a.state.hasOwnProperty("disabled")||(a.state.disabled=!1),a.state.hasOwnProperty("expanded")||(!a.state.disabled&&b<d.options.levels&&a.nodes&&a.nodes.length>0?a.state.expanded=!0:a.state.expanded=!1),a.state.hasOwnProperty("selected")||(a.state.selected=!1),d.nodes.push(a),a.nodes&&d.setInitialStates(a,b)})}},a.prototype.clickHandler=function(d){this.options.enableLinks||d.preventDefault();var b=$(d.target),a=this.findNode(b);if(a&&!a.state.disabled){var e=b.attr("class")?b.attr("class").split(" "):[];-1!==e.indexOf("expand-icon")?(this.toggleExpandedState(a,c.options),this.render()):-1!==e.indexOf("check-icon")?(this.toggleCheckedState(a,c.options),this.render()):(a.selectable?this.toggleSelectedState(a,c.options):this.toggleExpandedState(a,c.options),this.render())}},a.prototype.findNode=function(b){var c=b.closest("li.list-group-item").attr("data-nodeid"),a=this.nodes[c];return a||console.log("Error: node does not exist"),a},a.prototype.toggleExpandedState=function(a,b){a&&this.setExpandedState(a,!a.state.expanded,b)},a.prototype.setExpandedState=function(a,b,c){b===a.state.expanded||(b&&a.nodes?(a.state.expanded=!0,c.silent||this.$element.trigger("nodeExpanded",$.extend(!0,{},a))):b||(a.state.expanded=!1,c.silent||this.$element.trigger("nodeCollapsed",$.extend(!0,{},a)),a.nodes&&!c.ignoreChildren&&$.each(a.nodes,$.proxy(function(b,a){this.setExpandedState(a,!1,c)},this))))},a.prototype.toggleSelectedState=function(a,b){a&&this.setSelectedState(a,!a.state.selected,b)},a.prototype.setSelectedState=function(a,c,d){c===a.state.selected||(c?(this.options.multiSelect||$.each(this.findNodes("true","g","state.selected"),$.proxy(function(b,a){this.setSelectedState(a,!1,d)},this)),a.state.selected=!0,this.options.currentSelected=a,d.silent||this.$element.trigger("nodeSelected",$.extend(!0,{},a))):(a.state.selected=!1,this.options.currentSelected=b,d.silent||this.$element.trigger("nodeUnselected",$.extend(!0,{},a))))},a.prototype.hasSelectedNodes=function(){return b!==this.options.currentSelected},a.prototype.toggleCheckedState=function(a,b){a&&this.setCheckedState(a,!a.state.checked,b)},a.prototype.setCheckedState=function(a,b,c){b===a.state.checked||(b?(a.state.checked=!0,c.silent||this.$element.trigger("nodeChecked",$.extend(!0,{},a))):(a.state.checked=!1,c.silent||this.$element.trigger("nodeUnchecked",$.extend(!0,{},a))))},a.prototype.setDisabledState=function(a,c,b){c===a.state.disabled||(c?(a.state.disabled=!0,this.setExpandedState(a,!1,b),this.setSelectedState(a,!1,b),this.setCheckedState(a,!1,b),b.silent||this.$element.trigger("nodeDisabled",$.extend(!0,{},a))):(a.state.disabled=!1,b.silent||this.$element.trigger("nodeEnabled",$.extend(!0,{},a))))},a.prototype.render=function(){this.initialized||(this.$element.addClass(d),this.$wrapper=$(this.template.list),this.injectStyle(),this.initialized=!0),this.$element.empty().append(this.$wrapper.empty()),this.buildTree(this.tree,0)},a.prototype.buildTree=function(a,b){if(a){b+=1;var c=this;$.each(a,function(g,a){for(var e=$(c.template.item).addClass("node-"+c.elementId).addClass(a.state.checked?"node-checked":"").addClass(a.state.disabled?"node-disabled":"").addClass(a.state.selected?"node-selected":"").addClass(a.searchResult?"search-result":"").attr("data-nodeid",a.nodeId).attr("style",c.buildStyleOverride(a)),f=0;f<b-1;f++)e.append(c.template.indent);var d=[];if(a.nodes?(d.push("expand-icon"),a.state.expanded?d.push(c.options.collapseIcon):d.push(c.options.expandIcon)):d.push(c.options.emptyIcon),e.append($(c.template.icon).addClass(d.join(" "))),c.options.showIcon){var d=["node-icon"];d.push(a.icon||c.options.nodeIcon),a.state.selected&&(d.pop(),d.push(a.selectedIcon||c.options.selectedIcon||a.icon||c.options.nodeIcon)),e.append($(c.template.icon).addClass(d.join(" ")))}if(c.options.showCheckbox){var d=["check-icon"];a.state.checked?d.push(c.options.checkedIcon):d.push(c.options.uncheckedIcon),e.append($(c.template.icon).addClass(d.join(" ")))}if(c.options.enableLinks?e.append($(c.template.link).attr("href",a.href).append(a.text)):e.append(a.text),c.options.showTags&&a.tags&&$.each(a.tags,function(b,a){e.append($(c.template.badge).append(a))}),c.$wrapper.append(e),a.nodes&&a.state.expanded&&!a.state.disabled)return c.buildTree(a.nodes,b)})}},a.prototype.buildStyleOverride=function(a){if(a.state.disabled)return"";var b=a.color,c=a.backColor;return this.options.highlightSelected&&a.state.selected&&(this.options.selectedColor&&(b=this.options.selectedColor),this.options.selectedBackColor&&(c=this.options.selectedBackColor)),this.options.highlightSearchResults&&a.searchResult&&!a.state.disabled&&(this.options.searchResultColor&&(b=this.options.searchResultColor),this.options.searchResultBackColor&&(c=this.options.searchResultBackColor)),"color:"+b+";background-color:"+c+";"},a.prototype.injectStyle=function(){this.options.injectStyle&&!f.getElementById(this.styleId)&&$('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")},a.prototype.buildStyle=function(){var a=".node-"+this.elementId+"{";return this.options.color&&(a+="color:"+this.options.color+";"),this.options.backColor&&(a+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(a+="border:1px solid "+this.options.borderColor+";"):a+="border:none;",a+="}",this.options.onhoverColor&&(a+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"),this.css+a},a.prototype.template={list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'},a.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}",a.prototype.getNode=function(a){return this.nodes[a]},a.prototype.getParent=function(a){var b=this.identifyNode(a);return this.nodes[b.parentId]},a.prototype.getSiblings=function(b){var c=this.identifyNode(b),a=this.getParent(c);return(a?a.nodes:this.tree).filter(function(a){return a.nodeId!==c.nodeId})},a.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")},a.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")},a.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")},a.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")},a.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")},a.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")},a.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")},a.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")},a.prototype.selectNode=function(a,b){this.forEachIdentifier(a,b,$.proxy(function(a,b){this.setSelectedState(a,!0,b)},this)),this.render()},a.prototype.unselectNode=function(a,b){this.forEachIdentifier(a,b,$.proxy(function(a,b){this.setSelectedState(a,!1,b)},this)),this.render()},a.prototype.toggleNodeSelected=function(a,b){this.forEachIdentifier(a,b,$.proxy(function(a,b){this.toggleSelectedState(a,b)},this)),this.render()},a.prototype.collapseAll=function(a){var b=this.findNodes("true","g","state.expanded");this.forEachIdentifier(b,a,$.proxy(function(a,b){this.setExpandedState(a,!1,b)},this)),this.render()},a.prototype.collapseNode=function(a,b){this.forEachIdentifier(a,b,$.proxy(function(a,b){this.setExpandedState(a,!1,b)},this)),this.render()},a.prototype.expandAll=function(a){if((a=$.extend({},c.options,a))&&a.levels)this.expandLevels(this.tree,a.levels,a);else{var b=this.findNodes("false","g","state.expanded");this.forEachIdentifier(b,a,$.proxy(function(a,b){this.setExpandedState(a,!0,b)},this))}this.render()},a.prototype.expandNode=function(a,b){this.forEachIdentifier(a,b,$.proxy(function(b,a){this.setExpandedState(b,!0,a),b.nodes&&a&&a.levels&&this.expandLevels(b.nodes,a.levels-1,a)},this)),this.render()},a.prototype.expandLevels=function(b,d,a){a=$.extend({},c.options,a),$.each(b,$.proxy(function(c,b){this.setExpandedState(b,d>0,a),b.nodes&&this.expandLevels(b.nodes,d-1,a)},this))},a.prototype.revealNode=function(a,b){this.forEachIdentifier(a,b,$.proxy(function(b,c){for(var a=this.getParent(b);a;)this.setExpandedState(a,!0,c),a=this.getParent(a)},this)),this.render()},a.prototype.toggleNodeExpanded=function(a,b){this.forEachIdentifier(a,b,$.proxy(function(a,b){this.toggleExpandedState(a,b)},this)),this.render()},a.prototype.checkAll=function(a){var b=this.findNodes("false","g","state.checked");this.forEachIdentifier(b,a,$.proxy(function(a,b){this.setCheckedState(a,!0,b)},this)),this.render()},a.prototype.checkNode=function(a,b){this.forEachIdentifier(a,b,$.proxy(function(a,b){this.setCheckedState(a,!0,b)},this)),this.render()},a.prototype.uncheckAll=function(a){var b=this.findNodes("true","g","state.checked");this.forEachIdentifier(b,a,$.proxy(function(a,b){this.setCheckedState(a,!1,b)},this)),this.render()},a.prototype.uncheckNode=function(a,b){this.forEachIdentifier(a,b,$.proxy(function(a,b){this.setCheckedState(a,!1,b)},this)),this.render()},a.prototype.toggleNodeChecked=function(a,b){this.forEachIdentifier(a,b,$.proxy(function(a,b){this.toggleCheckedState(a,b)},this)),this.render()},a.prototype.disableAll=function(a){var b=this.findNodes("false","g","state.disabled");this.forEachIdentifier(b,a,$.proxy(function(a,b){this.setDisabledState(a,!0,b)},this)),this.render()},a.prototype.disableNode=function(a,b){this.forEachIdentifier(a,b,$.proxy(function(a,b){this.setDisabledState(a,!0,b)},this)),this.render()},a.prototype.enableAll=function(a){var b=this.findNodes("true","g","state.disabled");this.forEachIdentifier(b,a,$.proxy(function(a,b){this.setDisabledState(a,!1,b)},this)),this.render()},a.prototype.enableNode=function(a,b){this.forEachIdentifier(a,b,$.proxy(function(a,b){this.setDisabledState(a,!1,b)},this)),this.render()},a.prototype.toggleNodeDisabled=function(a,b){this.forEachIdentifier(a,b,$.proxy(function(a,b){this.setDisabledState(a,!a.state.disabled,b)},this)),this.render()},a.prototype.forEachIdentifier=function(a,b,d){b=$.extend({},c.options,b),a instanceof Array||(a=[a]),$.each(a,$.proxy(function(c,a){d(this.identifyNode(a),b)},this))},a.prototype.identifyNode=function(a){return"number"==typeof a?this.nodes[a]:a},a.prototype.search=function(a,b){b=$.extend({},c.searchOptions,b),this.clearSearch({render:!1});var d=[];if(a&&a.length>0){b.exactMatch&&(a="^"+a+"$");var e="g";b.ignoreCase&&(e+="i"),d=this.findNodes(a,e),$.each(d,function(b,a){a.searchResult=!0})}return b.revealResults?this.revealNode(d):this.render(),this.$element.trigger("searchComplete",$.extend(!0,{},d)),d},a.prototype.clearSearch=function(a){a=$.extend({},{render:!0},a);var b=$.each(this.findNodes("true","g","searchResult"),function(b,a){a.searchResult=!1});a.render&&this.render(),this.$element.trigger("searchCleared",$.extend(!0,{},b))},a.prototype.findNodes=function(c,a,b){a=a||"g",b=b||"text";var d=this;return $.grep(this.nodes,function(f){var e=d.getNodeValue(f,b);if("string"==typeof e)return e.match(new RegExp(c,a))})},a.prototype.getNodeValue=function(b,a){var c=a.indexOf(".");if(c>0){var d=b[a.substring(0,c)],e=a.substring(c+1,a.length);return this.getNodeValue(d,e)}return b.hasOwnProperty(a)?b[a].toString():void 0};var g=function(a){e.console&&e.console.error(a)};$.fn[d]=function(c,e){var b;return this.each(function(){var f=$.data(this,d);"string"==typeof c?f?$.isFunction(f[c])&&"_"!==c.charAt(0)?(e instanceof Array||(e=[e]),b=f[c].apply(f,e)):g("No such method : "+c):g("Not initialized, can not call method : "+c):"boolean"==typeof c?b=f:$.data(this,d,new a(this,$.extend(!0,{},c)))}),b||this}}(jQuery,window,document)