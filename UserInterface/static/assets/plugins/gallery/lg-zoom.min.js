/**!
 * lg-zoom.js | 1.0.1 | December 22nd 2016
 * http://sachinchoolur.github.io/lg-zoom.js
 * Copyright (c) 2016 Sachin N; 
 * @license GPLv3 
 */ !function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LgZoom=a()}(function(){var a;return(function d(e,f,b){function c(a,k){if(!f[a]){if(!e[a]){var i="function"==typeof require&&require;if(!k&&i)return i(a,!0);if(g)return g(a,!0);var j=new Error("Cannot find module '"+a+"'");throw j.code="MODULE_NOT_FOUND",j}var h=f[a]={exports:{}};e[a][0].call(h.exports,function(b){return c(e[a][1][b]||b)},h,h.exports,d,e,f,b)}return f[a].exports}for(var g="function"==typeof require&&require,a=0;a<b.length;a++)c(b[a]);return c})({1:[function(b,c,d){!function(c,b){if("function"==typeof a&&a.amd)a([],b);else if(void 0!==d)b();else{var e={exports:{}};b(),c.lgZoom=e.exports}}(this,function(){"use strict";var b,c,d=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d},e={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300,useLeftForZoom:(b=!1,(c=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./))&&54>parseInt(c[2],10)&&(b=!0),b)},a=function(a){return this.el=a,this.core=window.lgData[this.el.getAttribute("lg-uid")],this.core.s=d({},e,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)),this};a.prototype.init=function(){var a=this,b='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';a.core.s.actualSize&&(b+='<span id="lg-actual-size" class="lg-icon"></span>'),a.core.s.useLeftForZoom?utils.addClass(a.core.outer,"lg-use-left-for-zoom"):utils.addClass(a.core.outer,"lg-use-transition-for-zoom"),this.core.outer.querySelector(".lg-toolbar").insertAdjacentHTML("beforeend",b),utils.on(a.core.el,"onSlideItemLoad.lgtmzoom",function(b){var c=a.core.s.enableZoomAfter+b.detail.delay;utils.hasClass(document.body,"lg-from-hash")&&b.detail.delay?c=0:utils.removeClass(document.body,"lg-from-hash"),a.zoomabletimeout=setTimeout(function(){utils.addClass(a.core.___slide[b.detail.index],"lg-zoomable")},c+30)});var c=1,d=function(c){var f,g,b=a.core.outer.querySelector(".lg-current .lg-image"),h=(window.innerWidth-b.clientWidth)/2,i=(window.innerHeight-b.clientHeight)/2+(document.documentElement.scrollTop||document.body.scrollTop);f=a.pageX-h,g=a.pageY-i;var d=(c-1)*f,e=(c-1)*g;utils.setVendor(b,"Transform","scale3d("+c+", "+c+", 1)"),b.setAttribute("data-scale",c),a.core.s.useLeftForZoom?(b.parentElement.style.left=-d+"px",b.parentElement.style.top=-e+"px"):utils.setVendor(b.parentElement,"Transform","translate3d(-"+d+"px, -"+e+"px, 0)"),b.parentElement.setAttribute("data-x",d),b.parentElement.setAttribute("data-y",e)},e=function(){c>1?utils.addClass(a.core.outer,"lg-zoomed"):a.resetZoom(),c<1&&(c=1),d(c)},f=function(b,f,h,i){var g,d=f.clientWidth;g=a.core.s.dynamic?a.core.s.dynamicEl[h].width||f.naturalWidth||d:a.core.items[h].getAttribute("data-width")||f.naturalWidth||d,utils.hasClass(a.core.outer,"lg-zoomed")?c=1:g>d&&(c=g/d||2),i?(a.pageX=window.innerWidth/2,a.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)):(a.pageX=b.pageX||b.targetTouches[0].pageX,a.pageY=b.pageY||b.targetTouches[0].pageY),e(),setTimeout(function(){utils.removeClass(a.core.outer,"lg-grabbing"),utils.addClass(a.core.outer,"lg-grab")},10)},g=!1;utils.on(a.core.el,"onAferAppendSlide.lgtmzoom",function(c){var d=c.detail.index,b=a.core.___slide[d].querySelector(".lg-image");a.core.isTouch||utils.on(b,"dblclick",function(a){f(a,b,d)}),a.core.isTouch&&utils.on(b,"touchstart",function(a){g?(clearTimeout(g),g=null,f(a,b,d)):g=setTimeout(function(){g=null},300),a.preventDefault()})}),utils.on(window,"resize.lgzoom scroll.lgzoom orientationchange.lgzoom",function(){a.pageX=window.innerWidth/2,a.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop),d(c)}),utils.on(document.getElementById("lg-zoom-out"),"click.lg",function(){a.core.outer.querySelector(".lg-current .lg-image")&&(c-=a.core.s.scale,e())}),utils.on(document.getElementById("lg-zoom-in"),"click.lg",function(){a.core.outer.querySelector(".lg-current .lg-image")&&(c+=a.core.s.scale,e())}),utils.on(document.getElementById("lg-actual-size"),"click.lg",function(b){f(b,a.core.___slide[a.core.index].querySelector(".lg-image"),a.core.index,!0)}),utils.on(a.core.el,"onBeforeSlide.lgtm",function(){c=1,a.resetZoom()}),a.core.isTouch||a.zoomDrag(),a.core.isTouch&&a.zoomSwipe()},a.prototype.resetZoom=function(){utils.removeClass(this.core.outer,"lg-zoomed");for(var a=0;a<this.core.___slide.length;a++)this.core.___slide[a].querySelector(".lg-img-wrap")&&(this.core.___slide[a].querySelector(".lg-img-wrap").removeAttribute("style"),this.core.___slide[a].querySelector(".lg-img-wrap").removeAttribute("data-x"),this.core.___slide[a].querySelector(".lg-img-wrap").removeAttribute("data-y"));for(var b=0;b<this.core.___slide.length;b++)this.core.___slide[b].querySelector(".lg-image")&&(this.core.___slide[b].querySelector(".lg-image").removeAttribute("style"),this.core.___slide[b].querySelector(".lg-image").removeAttribute("data-scale"));this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)},a.prototype.zoomSwipe=function(){for(var a=this,e={},f={},g=!1,h=!1,i=!1,b=0;b<a.core.___slide.length;b++)utils.on(a.core.___slide[b],"touchstart.lg",function(c){if(utils.hasClass(a.core.outer,"lg-zoomed")){var b=a.core.___slide[a.core.index].querySelector(".lg-object");i=b.offsetHeight*b.getAttribute("data-scale")>a.core.outer.querySelector(".lg").clientHeight,h=b.offsetWidth*b.getAttribute("data-scale")>a.core.outer.querySelector(".lg").clientWidth,(h||i)&&(c.preventDefault(),e={x:c.targetTouches[0].pageX,y:c.targetTouches[0].pageY})}});for(var c=0;c<a.core.___slide.length;c++)utils.on(a.core.___slide[c],"touchmove.lg",function(c){if(utils.hasClass(a.core.outer,"lg-zoomed")){var d,j,b=a.core.___slide[a.core.index].querySelector(".lg-img-wrap");c.preventDefault(),g=!0,f={x:c.targetTouches[0].pageX,y:c.targetTouches[0].pageY},utils.addClass(a.core.outer,"lg-zoom-dragging"),j=i?-Math.abs(b.getAttribute("data-y"))+(f.y-e.y):-Math.abs(b.getAttribute("data-y")),d=h?-Math.abs(b.getAttribute("data-x"))+(f.x-e.x):-Math.abs(b.getAttribute("data-x")),(Math.abs(f.x-e.x)>15||Math.abs(f.y-e.y)>15)&&(a.core.s.useLeftForZoom?(b.style.left=d+"px",b.style.top=j+"px"):utils.setVendor(b,"Transform","translate3d("+d+"px, "+j+"px, 0)"))}});for(var d=0;d<a.core.___slide.length;d++)utils.on(a.core.___slide[d],"touchend.lg",function(){utils.hasClass(a.core.outer,"lg-zoomed")&&g&&(g=!1,utils.removeClass(a.core.outer,"lg-zoom-dragging"),a.touchendZoom(e,f,h,i))})},a.prototype.zoomDrag=function(){for(var b=this,c={},d={},e=!1,f=!1,g=!1,h=!1,a=0;a<b.core.___slide.length;a++)utils.on(b.core.___slide[a],"mousedown.lgzoom",function(a){var d=b.core.___slide[b.core.index].querySelector(".lg-object");h=d.offsetHeight*d.getAttribute("data-scale")>b.core.outer.querySelector(".lg").clientHeight,g=d.offsetWidth*d.getAttribute("data-scale")>b.core.outer.querySelector(".lg").clientWidth,utils.hasClass(b.core.outer,"lg-zoomed")&&utils.hasClass(a.target,"lg-object")&&(g||h)&&(a.preventDefault(),c={x:a.pageX,y:a.pageY},e=!0,b.core.outer.scrollLeft+=1,b.core.outer.scrollLeft-=1,utils.removeClass(b.core.outer,"lg-grab"),utils.addClass(b.core.outer,"lg-grabbing"))});utils.on(window,"mousemove.lgzoom",function(k){if(e){var i,j,a=b.core.___slide[b.core.index].querySelector(".lg-img-wrap");f=!0,d={x:k.pageX,y:k.pageY},utils.addClass(b.core.outer,"lg-zoom-dragging"),j=h?-Math.abs(a.getAttribute("data-y"))+(d.y-c.y):-Math.abs(a.getAttribute("data-y")),i=g?-Math.abs(a.getAttribute("data-x"))+(d.x-c.x):-Math.abs(a.getAttribute("data-x")),b.core.s.useLeftForZoom?(a.style.left=i+"px",a.style.top=j+"px"):utils.setVendor(a,"Transform","translate3d("+i+"px, "+j+"px, 0)")}}),utils.on(window,"mouseup.lgzoom",function(a){e&&(e=!1,utils.removeClass(b.core.outer,"lg-zoom-dragging"),f&&(c.x!==d.x||c.y!==d.y)&&(d={x:a.pageX,y:a.pageY},b.touchendZoom(c,d,g,h)),f=!1),utils.removeClass(b.core.outer,"lg-grabbing"),utils.addClass(b.core.outer,"lg-grab")})},a.prototype.touchendZoom=function(e,f,i,j){var a=this.core.___slide[this.core.index].querySelector(".lg-img-wrap"),d=this.core.___slide[this.core.index].querySelector(".lg-object"),b=-Math.abs(a.getAttribute("data-x"))+(f.x-e.x),c=-Math.abs(a.getAttribute("data-y"))+(f.y-e.y),g=(this.core.outer.querySelector(".lg").clientHeight-d.offsetHeight)/2,k=Math.abs(d.offsetHeight*Math.abs(d.getAttribute("data-scale"))-this.core.outer.querySelector(".lg").clientHeight+g),h=(this.core.outer.querySelector(".lg").clientWidth-d.offsetWidth)/2,l=Math.abs(d.offsetWidth*Math.abs(d.getAttribute("data-scale"))-this.core.outer.querySelector(".lg").clientWidth+h);(Math.abs(f.x-e.x)>15||Math.abs(f.y-e.y)>15)&&(j&&(c<= -k?c=-k:c>= -g&&(c=-g)),i&&(b<= -l?b=-l:b>= -h&&(b=-h)),j?a.setAttribute("data-y",Math.abs(c)):c=-Math.abs(a.getAttribute("data-y")),i?a.setAttribute("data-x",Math.abs(b)):b=-Math.abs(a.getAttribute("data-x")),this.core.s.useLeftForZoom?(a.style.left=b+"px",a.style.top=c+"px"):utils.setVendor(a,"Transform","translate3d("+b+"px, "+c+"px, 0)"))},a.prototype.destroy=function(){var a=this;utils.off(a.core.el,".lgzoom"),utils.off(window,".lgzoom");for(var b=0;b<a.core.___slide.length;b++)utils.off(a.core.___slide[b],".lgzoom");utils.off(a.core.el,".lgtmzoom"),a.resetZoom(),clearTimeout(a.zoomabletimeout),a.zoomabletimeout=!1},window.lgModules.zoom=a})},{}]},{},[1])(1)})